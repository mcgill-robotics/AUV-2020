<launch>
    <arg name="sim" default="false" />
    <group unless="$(arg sim)">
		<include file="$(find sensors)/launch/imu.launch"/>
		<include file="$(find sensors)/launch/dvl.launch"/>
    </group>

	<arg name="q_imu_auv_w" default="0.0" />
	<arg name="q_imu_auv_x" default="0.0" />
	<arg name="q_imu_auv_y" default="0.0" />
	<arg name="q_imu_auv_z" default="1.0" />

	<arg name="q_dvl_auv_w" default="0.0" />
	<arg name="q_dvl_auv_x" default="0.0" />
	<arg name="q_dvl_auv_y" default="0.0" />
	<arg name="q_dvl_auv_z" default="1.0" />

	<arg name="auv_dvl_offset_x" default="0.0" />
	<arg name="auv_dvl_offset_y" default="0.0" />
	<arg name="auv_dvl_offset_z" default="-0.3" />

	<node name="state_aggregator" pkg="state_estimation" type="state_aggregator.py" respawn="true" output="screen">
		<param name="update_rate" value="100" />
		<param name="q_imu_auv_w" value="$(arg q_imu_auv_w)" />
		<param name="q_imu_auv_x" value="$(arg q_imu_auv_x)" />
		<param name="q_imu_auv_y" value="$(arg q_imu_auv_y)" />
		<param name="q_imu_auv_z" value="$(arg q_imu_auv_z)" />

		<param name="q_dvl_auv_w" value="$(arg q_dvl_auv_w)" />
		<param name="q_dvl_auv_x" value="$(arg q_dvl_auv_x)" />
		<param name="q_dvl_auv_y" value="$(arg q_dvl_auv_y)" />
		<param name="q_dvl_auv_z" value="$(arg q_dvl_auv_z)" />

		<param name="auv_dvl_offset_x" value="$(arg auv_dvl_offset_x)" />
		<param name="auv_dvl_offset_y" value="$(arg auv_dvl_offset_y)" />
		<param name="auv_dvl_offset_z" value="$(arg auv_dvl_offset_z)" />
	</node>


	

</launch>
